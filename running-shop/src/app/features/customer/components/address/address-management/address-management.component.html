<p-messages></p-messages>
<p-confirmDialog></p-confirmDialog>

<div class="address-header">
  <div>
    <h2>Địa Chỉ Của Tôi</h2>
    <p>Quản lý địa chỉ giao hàng cho đơn hàng của bạn</p>
  </div>
  <button pButton class="add-btn" (click)="showDialog('create')">
    <i class="pi pi-plus"></i> Thêm Địa Chỉ Mới
  </button>
</div>
<hr class="blue-line" />

<div class="address-list">
  <div class="address-card" *ngFor="let address of addresses" [ngClass]="{'default': address.isDefault}">
    <div class="card-header">
      <div>
        <div class="name">{{ address.fullName }}</div>
      </div>
      <button *ngIf="address.isDefault" class="default-badge">
        <i class="pi pi-star-fill"></i> Mặc định
      </button>
    </div>
    <div class="card-body">
      <div class="info-row"><span>Số điện thoại:</span> <b>{{ address.phone }}</b></div>
      <div class="info-row"><span>Địa chỉ:</span> <b>{{ address.addressLine }}</b></div>
      <div class="info-row"><span>Thành phố:</span> <b>{{ address.city }}</b></div>
      <div class="info-row"><span>Quốc gia:</span> <b>{{ address.country }}</b></div>
    </div>
    <div class="card-footer">
      <button *ngIf="!address.isDefault" pButton class="set-default-btn" (click)="setDefault(address)">
        Đặt làm mặc định
      </button>
      <span *ngIf="address.isDefault" class="default-text">
        <i class="pi pi-map-marker"></i> Địa chỉ giao hàng mặc định
      </span>
      <p-splitButton label="Tùy chọn" icon="pi pi-angle-down" [model]="getMenuItems(address)"></p-splitButton>
    </div>
  </div>
</div>

<app-address-form
  [display]="displayDialog"
  [mode]="mode"
  [address]="selectedAddress"
  (displayChange)="displayDialog = $event"
  (save)="onSave($event)"
  (cancel)="closeDialog()"
></app-address-form>
